<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="Arreguez German">
    <meta name="generator" content="Jekyll v3.8.6">
    <title>Casas para Alquilar | Inmobiliaria UBP</title>


    <link rel="canonical" href="https://getbootstrap.com/docs/4.4/examples/carousel/">

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet"
        href="https://bootstrap-ecommerce.com/bootstrap-ecommerce-html/sass/ui-assets/components/_elements.scss">
    <link rel="stylesheet" href="https://bootstrap-ecommerce.com/bootstrap-ecommerce-html/css/ui.css">
    <link rel="stylesheet" href="https://bootstrap-ecommerce.com/bootstrap-ecommerce-html/css/responsive.css">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
        integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <!-- Favicons -->
    <link rel="icon" href="imagenes/imagen4.png">
    <meta name="msapplication-config"
        content="https://getbootstrap.com//docs/4.4/assets/img/favicons/browserconfig.xml">
    <meta name="theme-color" content="#563d7c">


    <style>
        .bd-placeholder-img {
            font-size: 1.125rem;
            text-anchor: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        @media (min-width: 768px) {
            .bd-placeholder-img-lg {
                font-size: 3.5rem;
            }
        }
    </style>
    <!-- Custom styles for this template -->

    <style>
        fieldset.active {
            display: block !important
        }

        fieldset {
            display: none
        }

        .pic0 {
            width: 82%;
            margin-left: 85px;
            margin-right: auto;
            display: block
        }

        .product-pic {
            padding-left: auto;
            padding-right: auto;
            width: 100%
        }

        .thumbnails {
            position: absolute
        }

        .fit-image {
            width: 100%;
            object-fit: cover
        }

        .tb {
            width: 62px;
            height: 62px;
            border: 1px solid grey;
            margin: 2px;
            opacity: 0.4;
            cursor: pointer
        }

        .tb-active {
            opacity: 1
        }

        .thumbnail-img {
            width: 60px;
            height: 60px
        }

        @media screen and (max-width: 768px) {
            .pic0 {
                width: 242px;
            }
        }
    </style>

    <link href="https://getbootstrap.com/docs/4.4/examples/carousel/carousel.css" rel="stylesheet">
    <script data-dapp-detection="">
        (function () {
            let alreadyInsertedMetaTag = false

            function __insertDappDetected() {
                if (!alreadyInsertedMetaTag) {
                    const meta = document.createElement('meta')
                    meta.name = 'dapp-detected'
                    document.head.appendChild(meta)
                    alreadyInsertedMetaTag = true
                }
            }

            if (window.hasOwnProperty('web3')) {
                // Note a closure can't be used for this var because some sites like
                // www.wnyc.org do a second script execution via eval for some reason.
                window.__disableDappDetectionInsertion = true
                // Likely oldWeb3 is undefined and it has a property only because
                // we defined it. Some sites like wnyc.org are evaling all scripts
                // that exist again, so this is protection against multiple calls.
                if (window.web3 === undefined) {
                    return
                }
                __insertDappDetected()
            } else {
                var oldWeb3 = window.web3
                Object.defineProperty(window, 'web3', {
                    configurable: true,
                    set: function (val) {
                        if (!window.__disableDappDetectionInsertion)
                            __insertDappDetected()
                        oldWeb3 = val
                    },
                    get: function () {
                        if (!window.__disableDappDetectionInsertion)
                            __insertDappDetected()
                        return oldWeb3
                    }
                })
            }
        })()</script>

</head>

<body>
    <header>
        <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
            <a class="navbar-brand" href="index.html">Inmobiliaria UBP</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse"
                aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item active">
                        <!-- <a class="nav-link" href="#">Inicio <span class="sr-only">(current)</span></a>-->
                    </li>
                    <li class="nav-item">
                        <!--<a class="nav-link" href="contacto.html">Contacto</a>-->
                    </li>
                    <li class="nav-item">
                        <!--  <a class="nav-link" href="">Cotizar</a>-->
                    </li>
                </ul>
                <p><a class="btn btn-sm btn-primary" href="admin/login.php" role="button">Ingreso como Administrador</a></p>
            </div>
        </nav>
    </header>

    <main role="main">
        <br>
        <br>
        <div class="container">

            <div class="row">
                <div class="col-lg">
                    <div class="card shadow p-3 bg-light mb-5 rounded">
                        <div class="card-body">
                            <h4 id="first-title" class="card-title">Casas Disponibles para Alquilar</h4>
                            <hr>
                            <div id="casas-container"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div><!-- /.container -->
        <br>
        <br>

        <!-- Modal Cotizador -->
        <div class="modal fade" id="my_modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Cotizador:</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="inputGroup-sizing-default">Precio por Mes</span>
                            </div>
                            <input type="text" class="form-control" id="porMesPrecio" aria-label="Sizing example input"
                                aria-describedby="inputGroup-sizing-default" disabled>
                        </div>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <label class="input-group-text" for="inputGroupSelect01">Cantidad de Mes</label>
                            </div>
                            <select class="custom-select" id="meses">
                                <option value="1" selected>1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                            </select>
                        </div>
                        <hr>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="inputGroup-sizing-default">Total</span>
                            </div>
                            <input type="text" class="form-control" id="totalPrecio" aria-label="Sizing example input"
                                aria-describedby="inputGroup-sizing-default" disabled>
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger" data-dismiss="modal">Cerrar</button>
                        <button type="button" onclick="getCotizacion()" class="btn btn-success">Cotizar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal Imagenes/Video-->
        <div class="modal fade" id="imgModal" data-backdrop="static" data-keyboard="false" tabindex="-1"
            aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="staticBackdropLabel">Imagenes</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col">
                                <div class="accordion" id="accordionExample">
                                    <div class="card">
                                        <div class="card-header" id="headingOne">
                                            <h2 class="mb-0">
                                                <button class="btn btn-block text-left" type="button"
                                                    data-toggle="collapse" data-target="#collapseOne"
                                                    aria-expanded="true" aria-controls="collapseOne">
                                                    <i class="fa fa-eye"></i> Imagenes
                                                </button>
                                            </h2>
                                        </div>

                                        <div id="collapseOne" class="collapse show" aria-labelledby="headingOne"
                                            data-parent="#accordionExample">
                                            <div class="card-body">
                                                <div class="container-fluid px-sm-1 py-5 mx-auto">
                                                    <div class="row justify-content-center">
                                                        <div class="d-flex">
                                                            <div class="">
                                                                <div class="d-flex flex-column thumbnails"
                                                                    id="imgThums">

                                                                </div>
                                                                <div id="imgSrcs">

                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="card" id="video-section" hidden>
                                        <div class="card-header" id="headingTwo">
                                            <h2 class="mb-0">
                                                <button class="btn btn-block text-left collapsed" type="button"
                                                    data-toggle="collapse" data-target="#collapseTwo"
                                                    aria-expanded="false" aria-controls="collapseTwo">
                                                    <i class="fa fa-play"></i> Video
                                                </button>
                                            </h2>
                                        </div>
                                        <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo"
                                            data-parent="#accordionExample">
                                            <div class="card-body">
                                                Aqui se insertara el video si corresponde
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                    </div>
                </div>
            </div>
        </div>


        <script src="https://code.jquery.com/jquery-3.6.0.js"
            integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>

        <!-- Funcion que setea las imagenes en el moda de imagenes -->

        <script>
            var imgThums = document.getElementById('imgThums');
            var imgSrcs = document.getElementById('imgSrcs');


            function modalMedia(id, tabla) {
                imgSrcs.innerHTML = '';
                imgThums.innerHTML = '';

                var element;

                $.ajax({
                    type: "POST",  //type of method
                    url: "prueba.php",  //your page
                    data: { id: id, tabla: tabla },// passing the values
                    async: false,
                    success: function (res) {
                        //console.log(JSON.parse(res));
                        element = JSON.parse(res);
                    }
                });

                for (let index = 0; index < element.length; index++) {
                    if (index == 0) {
                        var temp = 'tb-active'
                        var temp2 = 'active'

                    } else {
                        var temp = '';
                        var temp2 = ''
                    }

                    imgThums.innerHTML += `
            <div id="f`+ index + `" class="tb ` + temp + `"> <img class="thumbnail-img fit-image"
            src="`+ element[index].img_ruta + `"> </div>
            `
                    imgSrcs.innerHTML += `
            <fieldset id="f`+ index + `1" class="` + temp2 + `">
                <div class="product-pic"> <img class="pic0" src="`+ element[index].img_ruta + `"> </div>
            </fieldset>
            `
                };

                $(".tb").hover(function () {

                    $(".tb").removeClass("tb-active");
                    $(this).addClass("tb-active");

                    //current_fs = $(".active");

                    next_fs = $(this).attr('id');
                    next_fs = "#" + next_fs + "1";

                    $("fieldset").removeClass("active");
                    $(next_fs).addClass("active");


                });

            }
        </script>

        <script>
            $(function () {
                $(".identifyingClass").click(function () {
                    var my_id_value = $(this).data('id');
                    console.log(my_id_value);
                    $("#porMesPrecio").val(my_id_value);
                })
            });

            var container = document.getElementById('casas-container');
            var xhr = new XMLHttpRequest();
            var objeto = [];
            xhr.open('GET', 'db/casasAlquilerDisponibles.php');

            xhr.onload = function () {
                var json = JSON.parse(xhr.responseText);
                //console.log(json)
                objeto = json;
                setCasas(json);


            }
            xhr.send();

            function setCasas(datos) {
                console.log(datos);

                for (let index = 0; index < datos.length; index++) {

                    container.innerHTML += `<article id="` + datos[index].casa_id + `" class="card card-product-list">
                    <div class="row no-gutters">
                        <aside class="col-md-3">
                    <br>
                    <hr>
                    <div class="">
                         <img id="imageresource" style="margin-top: 31px;" src="` + firstImage(datos[index].casa_id, 'alquiler') + `" class="img-fluid" alt="Responsive image">
                         <hr>
                         <center>
                         <button type="button" onclick="modalMedia(` + datos[index].casa_id + `, 'alquileres')" class="btn btn-primary" data-toggle="modal" data-target="#imgModal">
                             Ver más Imagenes
                         </button>
                         </center>
                         <br>
                     </div>
                 </aside> <!-- col.// -->
                 <div class="col-md-6">
                     <div class="info-main">
                         <p class="h4 title"> ${datos[index].casa_direccion} </p>
                         <hr>
                         <div>
                            <p><strong>Habitaciones:</strong> ${datos[index].casa_habitaciones} </p>
                            <p><strong>Baños:</strong> ${datos[index].casa_banios} </p>
                            <p><strong>Garage:</strong> ${datos[index].casa_garage} </p>
                            <hr>
                            <p class="h5">Precio por Mes: $ ${datos[index].casa_precioMes} </p>
                            <input type="text" id="casa-`+ datos[index].casa_id + `" value="` + datos[index].casa_precioMes + `" hidden>
                         </div>
                         <hr>
                         <p></p>
                     </div> <!-- info-main.// -->
                 </div> <!-- col.// -->
                 <aside class="col-sm-3">
                     <div class="info-aside">
                         <div class="price-wrap">

                </div> <!-- info-price-detail // -->
                <!-- <p class="text-success">Disponible</p> -->
                <br>
                <p>
                <a href="http://g2.develnet.net/solicitud.html?id=`+ datos[index].casa_id + `" class="btn btn-primary btn-block">Solicitar</a>
                <br>
                <a href="#" onclick="resetCotizador('casa-`+ datos[index].casa_id + `')" data-target="#my_modal" data-toggle="modal" class="btn btn-success btn-block identifyingClass" hidden >Cotizar</a>
                </p>
                </div> <!-- info-aside.// -->
            </aside> <!-- col.// -->
        </div> <!-- row.// -->
    </article> <!-- card-product .// -->
    <br>`

                }

            }


        </script>

        <!-- FOOTER -->
        <footer class="container">
            <p class="float-right"><a href="#">Volver al principio</a></p>
            <p>2021 Arreguez-Mora Company, Inc.
            </p>
        </footer>
    </main>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"
        integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js"
        integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <!-- Script Imagentes -->
    <script>
        // Funcion que con el parametro id obtiene un JSON con las rutas de imagenes para visualizar en el modal.
        function imageLoader(id, tabla) {
            $.ajax({
                type: "POST",  //type of method
                url: "prueba.php",  //your page
                data: { id: id, tabla: tabla },// passing the values
                success: function (res) {
                    console.log(JSON.parse(res));
                }
            });
        }

        function firstImage(id, tabla) {

            var rutaImagen = '';

            $.ajax({
                type: "POST",  //type of method
                url: "prueba.php",  //your page
                data: { id: id, tabla: tabla },// passing the values
                async: false,
                success: function (res) {
                    //console.log(JSON.parse(res));
                    var temporal = JSON.parse(res);
                    rutaImagen = temporal[0].img_ruta;
                    console.log(rutaImagen);
                }
            });

            return rutaImagen;
        }
    </script>

    <!-- Script Cotizador -->
    <script type="text/javascript">

        function resetCotizador(id) {
            document.getElementById('totalPrecio').value = '';
            document.getElementById('meses').value = 1;
            document.getElementById('porMesPrecio').value = document.getElementById(id).value;
        }

        function getCotizacion() {
            document.getElementById('totalPrecio').value = '$ ' + document.getElementById('porMesPrecio').value * document.getElementById('meses').value;
        }

    </script>




</body>

</html>